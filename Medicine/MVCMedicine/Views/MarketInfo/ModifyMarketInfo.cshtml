
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ModifyMarketInfo</title>
    <script src="~/Content/layui/layui.js"></script>
    <script src="~/Content/layui/jquery-1.10.2.min.js"></script>
    <link href="~/Content/layui/css/layui.css" rel="stylesheet" />
</head>
<body>

    <div class="layui-col-md8">
        <form class="layui-form layui-form-pane layui-col-md-offset2" lay-filter="form_add" action="../MarketInfo/ModifyMarketAndInventory">
            <div class="layui-form-item">
                <label class="layui-form-label">药品名称</label>
                <div class="layui-input-inline">
                    <input id="isNumber" type="text" name="ChineseName" readonly value="@ViewBag.medicineModel.ChineseName" class="layui-input" style="color:red;">
                </div>
                <label class="layui-form-label">数量</label>
                <div class="layui-input-inline">
                    <input type="text" name="MarketNumber" id="number" value="@ViewBag.MarketInfo.MarketNumber" onchange="abc()" required lay-verify="required||num||num0" placeholder="请输入" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">用户名称</label>
                <div class="layui-input-inline">
                    <input id="isNumber" type="text" name="UserName" readonly value="@ViewBag.UserInfo.UserName" class="layui-input" style="color:red;">
                </div>
                <label class="layui-form-label">药品价格</label>
                <div class="layui-input-inline">
                    <input type="text" name="MarketPrice" id="price" value="@ViewBag.Price.Price" readonly class="layui-input" style="color:red;">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">总额</label>
                <div class="layui-input-inline">
                    <input type="text" name="sumPrice" id="sumPrice" readonly required lay-verify="required" class="layui-input">
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit="" lay-filter="form_add">退购</button>
                </div>
            </div>
            <script>

                function abc() {
                    var number = document.getElementById("number").value;
                    var price = document.getElementById("price").value;
                    var result = number * price;
                    document.getElementById('sumPrice').value = result;
                }

                //加载Demo
                layui.use('form', function () {
                    var form = layui.form;
                    var reg;

                    form.verify({
                        num: function (value) {
                            reg = new RegExp('^[0-9]*$');
                            if (!reg.test(value)) {
                                return ('数量只能输入数字');
                            } 
                        },
                        num0:function(value){
                            if (value == 0) {
                                return ('请输入大于0的数量');
                            }
                        }
                    })
                });
            </script>
        </form>
    </div>
</body>
</html>
